<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Register on our messaging site and connect with friends and family.">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<?php include 'navbar.php'; ?>

<h1>تسجيل جديد</h1>
<form action="register.php" method="post">
    <label for="username">اسم المستخدم:</label>
    <input type="text" id="username" name="username" required>
    <br>
    <label for="email">البريد الإلكتروني:</label>
    <input type="email" id="email" name="email" required>
    <br>
    <label for="password">كلمة المرور:</label>
    <input type="password" id="password" name="password" required>
    <br>
    <label for="age">Age:</label>
    <input type="number" id="age" name="age" required>
    <br>
    <label for="gender">Gender:</label>
    <select id="gender" name="gender" required>
        <option value="male">Male</option>
        <option value="female">Female</option>
    </select>
    <br>
    <label for="terms">
        <input type="checkbox" id="terms" name="terms" required>
        I agree to the <a href="#">Terms of Service</a>
    </label>
    <br>
    <button type="submit">تسجيل</button>
</form>

<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    require 'database.php';
    
    $username = htmlspecialchars($_POST['username']);
    $email = htmlspecialchars($_POST['email']);
    $password = password_hash($_POST['password'], PASSWORD_DEFAULT);

    $stmt = $conn->prepare("INSERT INTO users (username, email, password) VALUES (?, ?, ?)");
    $stmt->bind_param("sss", $username, $email, $password);
    $stmt->execute();
    
    $user_id = $stmt->insert_id;
    $_SESSION['user_id'] = $user_id;
    $_SESSION['gender'] = $_POST['gender'];
    header("Location: profile.php?id=$user_id");
}
?>
<footer>
    &copy; <?php echo date("Y"); ?> All Rights Reserved.
</footer>
</body>
</html>
